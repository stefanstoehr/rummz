<!DOCTYPE html>
<html lang="en">
<head>
	<base target="_top">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<title>5_popupInput</title>
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

	<style>

            * {
            margin: 0;
            padding: 0
            }

            html {
            height: 100%
            }

            body,
            html,
            #map {
            height: 100%;
            margin: 0;
            padding: 0
            }

            body {
            position: relative;
            display: flex;
            justify-content: center;
            flex-direction: column;
            height: 100%;
            font-family: Lato, sans-serif;
            min-height: 100%;
            padding: 0;
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #f1f1f1;
            }

            .marker-position {
            position: absolute;
            bottom: 0;
            left: 0;
            z-index: 999;
            padding: 10px;
            font-weight: 700;
            background-color: #fff;
            }

            label {
            display: block;
            font:
                1rem 'Fira Sans',
                sans-serif;
            }

            input,
            label {
            margin: 0.4rem 0;
            }

	</style>

	
</head>
<body>

    <div class="marker-position">click on the map, move the marker, click on the marker</div>
    <div id="map"></div>

<script>

	/**
    * add move and delete marker
    */

    // config map
    let config = {
        minZoom: 7,
        maxZomm: 18
    };

    // magnification with which the map will start
    const zoom = 18;
    // co-ordinates
    const lat = 52.22977;
    const lon = 21.01178;

// calling map
const map = L.map("map", config).setView([lat, lon], zoom);

// Used to load and display tile layers on the map
// Most tile servers require attribution, which you can set under `Layer`
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  attribution:
    '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

// add marker on click
map.on("click", addMarker);

function addMarker(e) {
  // Add marker to map at click location
  const markerPlace = document.querySelector(".marker-position");
  markerPlace.textContent = `new marker: ${e.latlng.lat}, ${e.latlng.lng}`;

  const marker = new L.marker(e.latlng, {
    draggable: true
  })
    .addTo(map)
    .bindPopup(buttonRemove + popupInput);

  // event remove marker
  marker.on("popupopen", removeMarker);

  // event draged marker
  marker.on("dragend", dragedMaker);
}

const buttonRemove =
  '<button type="button" class="remove">delte marker ðŸ’”</button>';
  
const popupInput =  
    '<label for="name">Name:</label><input type="text" id="name" name="name" required minlength="1" maxlength="18" size="20" />' + '<label for="nhn">NHN:</label><input type="number" id="nhn" name="nhn" required minlength="1" maxlength="18" size="20" />';


// remove marker
function removeMarker() {
  const marker = this;
  const btn = document.querySelector(".remove");
  btn.addEventListener("click", function () {
    const markerPlace = document.querySelector(".marker-position");
    markerPlace.textContent = "goodbye marker ðŸ’©";
    map.removeLayer(marker);
  });
}

// draged
function dragedMaker() {
  const markerPlace = document.querySelector(".marker-position");
  markerPlace.textContent = `change position: ${this.getLatLng().lat}, ${
    this.getLatLng().lng
  }`;
}



</script>



</body>
</html>

